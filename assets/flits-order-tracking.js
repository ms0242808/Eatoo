window.flitsApp&&void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.run_after_jquery=function(t){var i=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(i),"function"==typeof t&&t())},1e3)},window.flitsApp.getShipmentDetails=function(){var t="/get_order_shipment";t=flitsAppJquery("#flits-order-shipment-url").val()+t,window.flitsApp.tracking_details=[],window.flitsApp.tracking_numbers=[],flitsAppJquery("a.flits-order-tracking").each(function(t,i){var r=flitsAppJquery(i).attr("data-tracking-number"),n=flitsAppJquery(i).attr("data-order-id"),e=flitsAppJquery(i).attr("data-line-item-id"),a=flitsAppJquery(i).closest(".flits-order-items-row"),s=flitsAppJquery(a).children(".flits-order-item").length,p=flitsAppJquery(a).find(".flits-order-tracking[data-tracking-number="+r+"]").length;null!=window.flitsApp.tracking_details[r]&&"line_item"!=window.flitsApp.tracking_details[r].type||window.flitsApp.tracking_numbers.push(r),s==p?(flitsAppJquery('[data-append-tracking-id="'+n+'"]').find(".flits-order-track-content").removeClass("flits-hidden"),window.flitsApp.tracking_details[r]={type:"order",id:n}):(flitsAppJquery('[data-append-tracking-id="'+n+'"]').addClass("flits-hidden"),flitsAppJquery(a).find(".flits-order-item").find(".flits-order-track-content").removeClass("flits-hidden"),window.flitsApp.tracking_details[r]={type:"line_item",id:e})}),1==flitsAppJquery("#flits-order-tracking-paid").val()&&1==flitsAppJquery("#flits-order-tracking-enable").val()?flitsAppJquery.each(window.flitsApp.tracking_numbers,function(i,r){window.flitsApp.setOrderTracking({display:"tracking_status",is_paid:!0,order_tracking_data:{tracking_number:r,tracking_status:"Ordered"},status:!0},window.flitsApp.tracking_details),flitsAppJquery.ajax({url:t,method:"POST",data:{token:flitsAppJquery("#flits-token").val(),tracking_number:r},success:function(t){if(t.status)if(null!=t.order_tracking_data&&"tracking_status"==t.display){var i=t;window.flitsApp.setOrderTracking(i,window.flitsApp.tracking_details)}else"tracking_button"==t.display&&(n=window.flitsApp.setOrderTrackingButton(r),window.flitsApp.appendTrackingDiv(n,r,window.flitsApp.tracking_details,!0),flitsAppJquery(".flits_append_tracking").addClass("flits-hidden"));else{var n=flitsAppJquery("<div class='flits-order-tracking-error-msg'/>").html(t.error),e=window.flitsApp.tracking_details[r].id;window.flitsApp.tracking_details[r].type,flitsAppJquery(".flits_append_tracking[data-append-tracking-id="+e+"]").append(n).removeClass("flits-hidden")}},error:function(t){t.status}})}):flitsAppJquery.each(window.flitsApp.tracking_numbers,function(t,i){var r=window.flitsApp.setOrderTrackingButton(i);window.flitsApp.appendTrackingDiv(r,i,window.flitsApp.tracking_details,!0)})},window.flitsApp.setOrderTracking=function(t,i){var r=t.order_tracking_data.tracking_number,n="",e=!1;t.is_paid?n=window.flitsApp.setOrderTrackingContent(t):(e=!0,n=window.flitsApp.setOrderTrackingButton(r)),window.flitsApp.appendTrackingDiv(n,r,i,e)},window.flitsApp.setOrderTrackingContent=function(t){var i=t.order_tracking_data.tracking_status,r=flitsAppJquery(".flits-order-track-content.flits-template").clone().removeClass("flits-template");return r.find("ul.flits-order-track-ul").attr("data-flits-active",i),r},window.flitsApp.setOrderTrackingButton=function(t){var i=flitsAppJquery("#flits-order-tracking-domain").val();return flitsAppJquery("<a/>").attr("href",i+"/"+t).attr("target","_blank").addClass("flits-btn-inline flits-btn-danger flits-btn-custom flits-btn").html(window.flitsApp.multilang.order_tracking.track_btn)},window.flitsApp.appendTrackingDiv=function(t,i,r,n){var e=r[i].id,a=null;if(null!==(a="order"==r[i].type&&n?flitsAppJquery(".flits_append_tracking_btn[data-append-tracking-id="+e+"]"):flitsAppJquery(".flits_append_tracking[data-append-tracking-id="+e+"]")))if(flitsAppJquery(a).find(".flits-order-track-ul").length>0){var s=flitsAppJquery(t).find(".flits-order-track-ul").attr("data-flits-active");flitsAppJquery(a).find(".flits-order-track-ul").attr("data-flits-active",s),flitsAppJquery(a).removeClass("flits-hidden")}else a.append(t).removeClass("flits-hidden")},window.flitsApp.run_after_jquery(window.flitsApp.getShipmentDetails);