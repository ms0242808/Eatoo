window.flitsApp&&void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.run_after_jquery=function(e){var r=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(r),"function"==typeof e&&e())},1e3)},window.flitsApp.referFriend=function(){var e=this;this.getReferralData=function(){flitsApp.showLoading(window.flitsApp.multilang_refer_friend.refer_page_getting_details,flitsAppJquery("#flits-page-refer-friend"));var e="/refer_friend/get_referral_data";e=flitsAppJquery("#flits-customer-url").val()+e,flitsAppJquery.ajax({url:e,method:"get",data:{token:flitsAppJquery("#flits-token").val()},success:function(e){if(e.status){flitsAppJquery("#flits-page-refer-friend").toast(window.flitsApp.multilang_refer_friend.refer_page_details_successfully_get);var r=flitsAppJquery("#flits-shop-money-format").val(),i=e.customer,t=e.customer.credit_log;""!=i.referral_code?flitsAppJquery(".flits-refferal-code-div").html(i.referral_code):(flitsAppJquery(".flits-referrer-code").val(window.flitsApp.multilang_refer_friend.referral_code_not_available),flitsAppJquery(".flits-referrer-code-copy-btn-div").addClass("flits-hidden")),""!=e.refer_by&&(flitsAppJquery(".flits-referee-inner-div").addClass("flits-hidden"),flitsAppJquery(".flits-refer-by").removeClass("flits-hidden"),flitsAppJquery(".flits-refer-by-text").html(window.flitsApp.multilang_refer_friend.you_are_referred_by+" "+e.refer_by));var f=0;t.length>0?(flitsAppJquery.each(t,function(e,i){var t=flitsAppJquery("#flits-refer-program-credit-log-template").clone();t.attr("id","flits-log-"+i.id);var l=i.credits;f+=l,l=window.flitsApp.multilang.earned+" "+window.flitsApp.formatMoney(Math.abs(l),r).replace(/((\,00)|(\.00))$/g,""),t.find(".flits-referral-customer-credit-col").html(l);var s=window.flitsApp.multilang_refer_friend.customer_deleted,d="--";null!=i.referrer_customer&&(s=i.referrer_customer.name,d=i.referrer_customer.email),t.find(".flits-referral-customer-name-col").html(s),t.find(".flits-referral-customer-email-col").html(d).attr("title",d),t.find(".flits-referral-customer-credit-date-col").html(i.created_at),flitsAppJquery(".flits-refer-program-credit-log").append(t)}),flitsAppJquery(".flits-refer-program-credit-history-div").removeClass("flits-hidden"),flitsAppJquery(".flits-refer-program-credit-history-empty").addClass("flits-hidden")):(flitsAppJquery(".flits-refer-program-credit-history-empty").removeClass("flits-hidden"),flitsAppJquery(".flits-refer-program-credit-history-div").addClass("flits-hidden")),f=window.flitsApp.formatMoney(Math.abs(f),r).replace(/((\,00)|(\.00))$/g,""),flitsAppJquery(".flits-refer-program-total-credits").html(f)}else flitsAppJquery('.flits-nav a[data-href="#flits-page-refer-friend"]').remove(),flitsAppJquery("#flits-page-refer-friend").remove()},error:function(e){e.status}})},this.copyReferrerCode=function(){flitsAppJquery("#flits-page-refer-friend").toast(window.flitsApp.multilang_refer_friend.referral_code_copied);var e=flitsAppJquery(".flits-referral-program-invitation-message-text").text(),r=flitsAppJquery(".flits-refferal-code-div").html();e=flitsAppJquery.trim(e.replace("##referral_code##",r));var i=flitsAppJquery("<input>");flitsAppJquery("body").append(i),i.val(e).select(),document.execCommand("copy"),i.remove()},this.sendReferRequest=function(){flitsApp.showLoading(window.flitsApp.multilang_refer_friend.refer_friend_loading,flitsAppJquery(".flits-referee-div")),flitsAppJquery(".flits-refer-friend-error-div").addClass("flits-hidden"),flitsAppJquery(".flits-refer-loader").removeClass("flits-hidden");var e=flitsAppJquery("#flits-refer-friend-code").val();if(""!=e){var r="/refer_friend/send_refer_request";r=flitsAppJquery("#flits-customer-url").val()+r,flitsAppJquery.ajax({url:r,method:"POST",data:{token:flitsAppJquery("#flits-token").val(),refer_friend_code:e},success:function(e){if(flitsAppJquery(".flits-refer-loader").addClass("flits-hidden"),e.status){flitsAppJquery("#flits-page-refer-friend").toast(window.flitsApp.multilang_refer_friend.successfully_refer_friend);var r=e.data.inviter.name;-1!=r&&(flitsAppJquery(".flits-enter-referral-code-label").addClass("flits-hidden"),flitsAppJquery(".flits-referee-inner-div").addClass("flits-hidden"),flitsAppJquery(".flits-refer-by").removeClass("flits-hidden"),flitsAppJquery(".flits-refer-by-text").html(window.flitsApp.multilang_refer_friend.you_are_referred_by+" "+r))}else{flitsAppJquery(".flits-refer-friend-error-div").removeClass("flits-hidden");var i="";switch(e.error_code){case 1:i=window.flitsApp.multilang_refer_friend.you_can_not_referred_yourself;break;case 2:i=window.flitsApp.multilang_refer_friend.something_went_wrong;break;case 3:i=window.flitsApp.multilang_refer_friend.invalid_referral_code;break;case 4:i=window.flitsApp.multilang_refer_friend.refer_program_not_active;break;default:i=window.flitsApp.multilang_refer_friend.something_went_wrong}flitsAppJquery(".flits-referee-div").toast(i)}},error:function(e){e.status}})}else flitsAppJquery(".flits-refer-loader").addClass("flits-hidden"),flitsAppJquery(".flits-refer-friend-error-div").removeClass("flits-hidden"),flitsAppJquery("#flits-page-refer-friend").toast(window.flitsApp.multilang_refer_friend.referral_code_is_required)},this.getReferralData(),flitsAppJquery(document).on("click",".flits-send-refer-request-btn",function(r){e.sendReferRequest()}),flitsAppJquery(document).on("click",".flits-copy-referral-code-btn",function(r){e.copyReferrerCode()})},window.flitsApp.append_anchor_div=function(e){if("/account"==location.pathname){var r=document.querySelector(".flits-pages"),i=document.querySelector(".flits-refer-friend .flits-anchor a"),t=document.querySelector(".flits-refer-friend .flits-div div");if(i){var f=document.querySelector(".flits-list-group").children.length,l=document.querySelector(".flits-list-group");e>=f?l.insertBefore(i,l.children[f]):l.insertBefore(i,l.children[e])}t&&r&&r.append(t)}window.flitsApp.run_after_jquery(window.flitsApp.referFriend)},window.flitsApp.multilang_refer_friend.refer_friend_rule_on&&1==window.flitsApp.multilang_refer_friend.refer_friend_rule_on&&window.flitsApp.append_anchor_div(4);