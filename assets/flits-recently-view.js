window.flitsApp&&void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.recently_viewed_products=function(){var t="flits_recently_products",e="flits-recently-products-ul",i=[],r=this;this.setCookie=function(t,e,i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3);var n="expires="+r.toUTCString();document.cookie=t+"="+e+";"+n+";path=/"},this.getCookie=function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},this.get_ajax_obj=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0},this.setProductData=function(){var t=flitsAppJquery("#flits-shop-money-format").val(),e=flitsAppJquery;e("[data-flits-recently-product-handle]").each(function(i,r){var n=e(this),s=e(this).attr("data-flits-recently-product-handle");e.ajax({method:"get",url:"/products/"+s+".json",success:function(i){var r=i.product,s="https://cdn.shopify.com/s/assets/no-image-2048-5e88c1b20e087fb7bbe9a3771824e743c244f437e4f8ba93bbf7b11b53f7824c.gif";null!=r.image&&(s=r.image.src);var o=s.lastIndexOf("."),a=s.substr(o);s=s.replace(a,"_200x_crop_center"+a),e(n).find(".flits-product-img").css({background:"url("+s+")","background-size":"contain","background-repeat":"no-repeat","background-position":"center center","background-image":s});var l=0;e.each(r.variants,function(i,s){var o=window.flitsApp.formatMoney(Math.abs(100*s.price),t).replace(/((\,00)|(\.00))$/g,""),a=s.title;1==r.variants.length&&"Default Title"==a&&(a=r.title);var c=$("<option/>");c.html(a),c.attr("value",s.id),c.attr("data-variant-price",o),e.ajax({method:"get",url:location.origin+"/products/"+r.handle+"?view=flits_product_variant_data&variant="+s.id,success:function(t){var i=(new DOMParser).parseFromString(t,"text/html"),r=JSON.parse(i.querySelector(".flits-product-variant-data").innerHTML);if("shopify"==r.inventory_management&&"deny"==r.inventory_policy&&r.inventory_quantity<=0){var s=e(n).find(".flits-add-to-cart"),o=s.attr("data-flits-sold-out-text");c.html(c.html()+" - "+o),-1!=e(n).find(".flits-product-variant-options option:selected").html().indexOf(o)&&s.addClass("flits-btn-danger").attr("disabled",!0).html(o)}},error:function(){}}),l<=0&&(l=o),e(n).find(".flits-product-variant-options").append(c)}),e(n).find(".flits-product-variant-title").append(r.title),e(n).find(".flits-product-variant-price").append(l),e(n).attr("title",r.title)},error:function(){e(n).remove()}})})},this.update_div=function(){if("/account"==location.pathname&&(window.flitsApp.set_recently_view_add_change_event(),window.flitsApp.set_recently_view_add_click_event()),null==document.getElementById(e))return!1;var t=this.get_all_display_product();t.length>0?(flitsAppJquery(".flits-recently-view-empty").hide(),flitsAppJquery("#"+e).show(),t.forEach(function(t,i){var r=flitsAppJquery(".flits-recently-products-li-structure").clone();r.removeClass("flits-recently-products-li-structure"),r.addClass("flits-recently-product-row"),r.find(".flits-product-title-anchor").attr("href","/products/"+t),r.attr("data-flits-recently-product-handle",t),flitsAppJquery("#"+e).append(r)}),r.setProductData()):(flitsAppJquery(".flits-recently-view-empty").show(),flitsAppJquery("#"+e).hide())},this.change_position_of_elments=function(){for(var t=document.getElementById(e),i=0;i<t.children.length;i++)t.children[i].setAttribute("data-position",i);for(i=0;i<t.children.length;i++)i>8&&t.children[i].remove()},this.update_products=function(){var e=this.getCookie(t);i=""===e.trim()?[]:JSON.parse(e)},this.isFull=function(){return 8==i.length},this.is_present=function(t){for(var e=0;e<i.length;e++)if(i[e]==t)return e;return-1},this.remove_product=function(t){1==i.length?i=[]:i.splice(t,1)},this.remove_first_product=function(){if(0!=i.length){var t=i[0];return i.splice(0,1),t}},this.save_products=function(){this.setCookie(t,JSON.stringify(i),15),this.update_div()},this.add_product=function(t){this.update_products();var e=this.is_present(t);-1!==e&&this.remove_product(e),this.isFull()&&this.remove_first_product(),i.push(t),this.save_products()},this.get_all_product=function(){return this.update_products(),i},this.get_all_display_product=function(){return this.update_products(),i.slice().reverse()},this.update_products(),this.update_div()},window.flitsApp.set_recently_view_add_change_event=function(){flitsAppJquery(document).on("change",".flits-recently-product-row .flits-product-variant-options",function(t){var e=this.options[this.selectedIndex].getAttribute("data-variant-price");this.closest(".flits-row").parentNode.querySelector(".flits-product-variant-price").innerHTML=e;var i="",r=this.closest(".flits-row").parentNode.querySelector(".flits-add-to-cart"),n=this.options[this.selectedIndex].innerHTML,s=r.getAttribute("data-flits-sold-out-text");-1!=n.indexOf(s)?(i=r.getAttribute("data-flits-sold-out-text"),r.disabled=!0,r.classList.add("flits-btn-danger")):(i=r.getAttribute("data-flits-add-to-cart-text"),r.disabled=!1,r.classList.remove("flits-btn-danger")),r.innerHTML=i})},window.flitsApp.set_recently_view_add_click_event=function(){flitsAppJquery(document).on("click",".flits-recently-product-row .flits-product-quantity-adjuster",function(t){var e=this.parentNode.querySelector(".flits-product-quantity-num"),i=parseInt(e.value);i=flits_validate_quantity(i),qtyMin=1,this.classList.contains("flits-product-quantity-add")?i+=1:i=i<=qtyMin?qtyMin:i-1,e.value=i}),flits_validate_quantity=function(t){return parseFloat(t)!=parseInt(t)||isNaN(t)?1:t}},window.flitsApp.recently_view_products_interval=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(window.flitsApp.recently_view_products_interval),window.flitsApp.recently_viewed_products())},1e3);